<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RDN Water Savings & Rebate Finder | AI Forester</title>
  <meta name="description" content="Discover your RDN water rebates (up to $875), calculate water savings in litres, and get a custom quote from certified irrigation specialists. Free water conservation calculator.">
  <link rel="stylesheet" href="rainwise-calculator.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <header>
    <div class="container">
      <h1>RDN Water Savings & Rebate Finder</h1>
      <p class="subtitle">Discover how much water and money you can save with RDN rebates ‚Äî and get a custom quote from a certified irrigation specialist.</p>
      <div class="badges">
        <span class="badge">üí∞ Up to $875 in Rebates</span>
        <span class="badge">üíß Save Thousands of Litres</span>
        <span class="badge">üìã Free Custom Quote</span>
        <span class="badge">üè° Rainwater Harvesting Available</span>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="rebate-highlight-box">
      <h2>üí° Did you know?</h2>
      <p>You can get <strong>up to $875 in rebates</strong> for simple upgrades like soil mulching ‚Äî often covering most of the project cost. Plus, rainwater harvesting systems are eligible for additional rebates!</p>
      <div class="program-links">
        <a href="https://rdn.bc.ca/irrigation-upgrades-and-soil-improvements" target="_blank" class="program-link">View Irrigation Rebates ‚Üí</a>
        <a href="https://rdn.bc.ca/rainwater-harvesting" target="_blank" class="program-link">View Rainwater Harvesting ‚Üí</a>
      </div>
    </div>

    <div class="calculator-wrapper">
      <div class="progress-bar">
        <div class="progress-step active" id="step1"><div class="step-circle">1</div><div class="step-label">Property Info</div></div>
        <div class="progress-step" id="step2"><div class="step-circle">2</div><div class="step-label">Current Usage</div></div>
        <div class="progress-step" id="step3"><div class="step-circle">3</div><div class="step-label">Select Upgrades</div></div>
        <div class="progress-step" id="step4"><div class="step-circle">4</div><div class="step-label">Your Savings</div></div>
      </div>

      <!-- Step 1: Property Information -->
      <div class="form-section active" id="section1">
        <h2>Let's Start with Your Property</h2>
        <div class="form-row">
          <div class="form-group"><label for="fullName">Your Name</label><input type="text" id="fullName" placeholder="John Smith"></div>
          <div class="form-group"><label for="email">Email</label><input type="email" id="email" placeholder="john@email.com"></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label for="phoneMain">Phone Number</label><input type="tel" id="phoneMain" placeholder="250-555-0123"></div>
          <div class="form-group"><label for="phoneAlt">Alternative Phone</label><input type="tel" id="phoneAlt" placeholder="250-555-0456"></div>
        </div>
        <div class="form-group"><label for="propertyAddress">Property Address</label><input type="text" id="propertyAddress" placeholder="123 Main Street"></div>
        <div class="form-row">
          <div class="form-group">
            <label for="city">City/Area within RDN</label>
            <input type="text" id="city" placeholder="e.g., Nanaimo, Parksville, Qualicum Beach" list="rdnCities">
            <datalist id="rdnCities">
              <option value="Nanaimo">
              <option value="Parksville">
              <option value="Qualicum Beach">
              <option value="Lantzville">
              <option value="Gabriola Island">
              <option value="Cedar">
              <option value="Ladysmith">
              <option value="Coombs">
              <option value="Errington">
              <option value="French Creek">
            </datalist>
          </div>
          <div class="form-group"><label for="postalCode">Postal Code</label><input type="text" id="postalCode" placeholder="V9S 1A1"></div>
        </div>
        <div class="form-group">
          <label for="propertyType">Property Type</label>
          <select id="propertyType" onchange="updatePropertyDefaults()">
            <option value="single">Single Family Home</option>
            <option value="townhouse">Townhouse</option>
            <option value="condo">Condo with Garden</option>
            <option value="large">Large Estate (1+ acre)</option>
          </select>
        </div>
        <button class="btn btn-primary" onclick="nextStep(1)" style="float:right;">Next: Water Usage ‚Üí</button>
      </div>

      <!-- Step 2: Water Usage Baseline -->
      <div class="form-section" id="section2">
        <h2>Current Water Usage</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="irrigatedArea">Irrigated Area (sq ft)</label>
            <input type="number" id="irrigatedArea" placeholder="2000" onchange="updateUsageAnalysis()">
            <p class="help-text">Total lawn and garden area that receives irrigation</p>
          </div>
          <div class="form-group">
            <label for="irrigationMonths">Irrigation Months/Year</label>
            <input type="number" id="irrigationMonths" placeholder="6" value="6" onchange="updateUsageAnalysis()">
            <p class="help-text">Typically May-October in the RDN region</p>
          </div>
        </div>
        <div class="form-group">
          <label for="irrigationSystem">Current Irrigation System</label>
          <select id="irrigationSystem" onchange="updateUsageAnalysis()">
            <option value="manual">Manual Watering (hose/sprinkler)</option>
            <option value="timer">Basic Timer System</option>
            <option value="inground">In-ground Sprinklers</option>
            <option value="mixed">Mixed System</option>
          </select>
        </div>
        <h3>Recent Water Bills (Optional - Improves Accuracy)</h3>
        <p class="help-text">Enter your water usage in litres from recent bills for more accurate savings calculations</p>
        <div class="water-usage-grid">
          <div><label for="usage1">Winter 2024-25</label><input type="number" id="usage1" placeholder="30,000" onchange="updateUsageAnalysis()"></div>
          <div><label for="usage2">Fall 2024</label><input type="number" id="usage2" placeholder="45,000" onchange="updateUsageAnalysis()"></div>
          <div><label for="usage3">Summer 2024</label><input type="number" id="usage3" placeholder="75,000" onchange="updateUsageAnalysis()"></div>
          <div><label for="usage4">Spring 2024</label><input type="number" id="usage4" placeholder="55,000" onchange="updateUsageAnalysis()"></div>
        </div>
        <div class="usage-analysis" id="usageAnalysis" style="display:none;">
          <h4>üíß Your Water Usage Summary</h4>
          <div class="analysis-grid">
            <div class="analysis-metric"><div class="metric-value" id="avgDailyUsage">0</div><div>Daily Usage</div></div>
            <div class="analysis-metric"><div class="metric-value" id="annualUsage">0</div><div>Annual Usage</div></div>
            <div class="analysis-metric"><div class="metric-value" id="outdoorUsage">0%</div><div>Outdoor Use</div></div>
            <div class="analysis-metric"><div class="metric-value" id="savingsPotential">0</div><div>Savings Potential</div></div>
          </div>
        </div>
        <div style="display:flex;justify-content:space-between;margin-top:30px;">
          <button class="btn btn-secondary" onclick="previousStep(2)">‚Üê Back</button>
          <button class="btn btn-primary" onclick="nextStep(2)">Next: Upgrades ‚Üí</button>
        </div>
      </div>

      <!-- Step 3: Select Upgrades -->
      <div class="form-section" id="section3">
        <h2>Select Your Water-Saving Upgrades</h2>
        <div class="checkbox-group">
          <div class="checkbox-item">
            <input type="checkbox" id="rainSensor" value="rainSensor" onchange="toggleUpgradeDetails(this.value)">
            <div class="checkbox-content">
              <div class="checkbox-title">Rain Sensor <span class="rebate-amount-inline">($75 rebate)</span></div>
              <div class="checkbox-description">Save 10-15% ‚Ä¢ Prevents watering in rain ‚Ä¢ Quick payback</div>
            </div>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="smartController" value="smartController" onchange="toggleUpgradeDetails(this.value)">
            <div class="checkbox-content">
              <div class="checkbox-title">Smart Controller <span class="rebate-amount-inline">($100 rebate)</span></div>
              <div class="checkbox-description">Save 20-40% ‚Ä¢ Weather-based scheduling ‚Ä¢ Top water saver</div>
            </div>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="dripConversion" value="dripConversion" onchange="toggleUpgradeDetails(this.value)">
            <div class="checkbox-content">
              <div class="checkbox-title">Drip Irrigation <span class="rebate-amount-inline">($400 rebate)</span></div>
              <div class="checkbox-description">Save 30-50% ‚Ä¢ Targeted root watering ‚Ä¢ Highest rebate</div>
            </div>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="mpRotators" value="mpRotators" onchange="toggleUpgradeDetails(this.value)">
            <div class="checkbox-content">
              <div class="checkbox-title">MP Rotators <span class="rebate-amount-inline">($100 rebate)</span></div>
              <div class="checkbox-description">Save 20-30% ‚Ä¢ Even water distribution ‚Ä¢ Less runoff</div>
            </div>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="soilImprovements" value="soilImprovements" onchange="toggleUpgradeDetails(this.value)">
            <div class="checkbox-content">
              <div class="checkbox-title">Soil Improvements <span class="rebate-amount-inline">(50% up to $100)</span></div>
              <div class="checkbox-description">Save 25% on watering ‚Ä¢ Better water retention ‚Ä¢ Often free with rebate</div>
            </div>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="rainwaterHarvesting" value="rainwaterHarvesting" onchange="toggleUpgradeDetails(this.value)">
            <div class="checkbox-content">
              <div class="checkbox-title">Rainwater Harvesting <span class="rebate-amount-inline">(50% up to $750)</span></div>
              <div class="checkbox-description">Save 100% on outdoor water ‚Ä¢ Drought-proof ‚Ä¢ Highest savings</div>
            </div>
          </div>
        </div>
        
        <!-- Upgrade Details (shown when selected) -->
        <div class="upgrade-details" id="rainSensorDetails">
          <h3>Rain Sensor Details</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="rainSensorCost">Installation Cost Estimate ($)</label>
              <input type="number" id="rainSensorCost" value="150">
              <p class="help-text">Includes sensor and professional installation</p>
            </div>
            <div class="form-group">
              <label for="rainSensorSavings">Expected Water Savings (%)</label>
              <input type="number" id="rainSensorSavings" value="15" min="10" max="20">
            </div>
          </div>
        </div>
        
        <div class="upgrade-details" id="smartControllerDetails">
          <h3>Smart Controller Details</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="controllerZones">Number of Zones</label>
              <select id="controllerZones" onchange="updateControllerCost()">
                <option value="4">4 zones</option>
                <option value="8" selected>8 zones</option>
                <option value="12">12 zones</option>
                <option value="16">16 zones</option>
              </select>
            </div>
            <div class="form-group">
              <label for="controllerCost">Installation Cost Estimate ($)</label>
              <input type="number" id="controllerCost" value="450">
            </div>
          </div>
          <div class="form-group">
            <label for="controllerSavings">Expected Water Savings (%)</label>
            <input type="number" id="controllerSavings" value="30" min="20" max="40">
          </div>
        </div>
        
        <div class="upgrade-details" id="dripConversionDetails">
          <h3>Drip Irrigation Conversion</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="dripArea">Area to Convert (sq ft)</label>
              <input type="number" id="dripArea" placeholder="1000" onchange="updateDripCost()">
              <p class="help-text">Garden beds and shrub areas</p>
            </div>
            <div class="form-group">
              <label for="dripCost">Installation Cost Estimate ($)</label>
              <input type="number" id="dripCost" value="1200">
            </div>
          </div>
          <div class="form-group">
            <label for="dripSavings">Expected Water Savings (%)</label>
            <input type="number" id="dripSavings" value="40" min="30" max="50">
          </div>
          <div class="cost-estimate-box">
            <h4>üí∞ Cost Estimate: $1.00-1.50 per sq ft</h4>
            <div class="cost-grid">
              <div class="cost-item"><div class="cost-value">$0.40-0.60</div><div class="cost-label">Materials/sq ft</div></div>
              <div class="cost-item"><div class="cost-value">$0.60-0.90</div><div class="cost-label">Labor/sq ft</div></div>
              <div class="cost-item"><div class="cost-value" id="dripTotalEstimate">$1,200</div><div class="cost-label">Your Estimate</div></div>
            </div>
          </div>
          <div class="form-group">
            <label for="irrigationDescription">Project Description</label>
            <textarea id="irrigationDescription" placeholder="Describe conversion plans (e.g., 'Convert 1000 sq ft of garden beds from spray heads to drip irrigation with pressure compensating emitters')"></textarea>
          </div>
        </div>
        
        <div class="upgrade-details" id="mpRotatorsDetails">
          <h3>MP Rotator Nozzles</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="rotatorHeads">Number of Heads</label>
              <input type="number" id="rotatorHeads" value="20" onchange="updateRotatorCost()">
            </div>
            <div class="form-group">
              <label for="rotatorCost">Installation Cost Estimate ($)</label>
              <input type="number" id="rotatorCost" value="400">
            </div>
          </div>
          <div class="form-group">
            <label for="rotatorSavings">Expected Water Savings (%)</label>
            <input type="number" id="rotatorSavings" value="25" min="20" max="30">
          </div>
        </div>
        
        <div class="upgrade-details" id="soilImprovementsDetails">
          <h3>Soil Improvements</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="applicationArea">Application Area (sq ft)</label>
              <input type="number" id="applicationArea" placeholder="500" onchange="calculateSoilAmounts()">
            </div>
            <div class="form-group">
              <label for="applicationDepth">Application Type</label>
              <select id="applicationDepth" onchange="calculateSoilAmounts()">
                <option value="">Select type</option>
                <option value="garden">Garden Beds (2 inch)</option>
                <option value="lawn">Lawn Topdressing (1/4 inch)</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label for="soilCost">Total Cost Estimate ($)</label>
            <input type="number" id="soilCost" value="200">
            <p class="help-text">Remember: 50% rebate up to $100</p>
          </div>
          <div class="cost-estimate-box" id="soilCalculator" style="display:none;">
            <h4>Required Soil Amendment</h4>
            <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:15px;">
              <div style="text-align:center;">
                <div id="bagsNeeded" style="font-size:1.2em;font-weight:bold;">0 bags</div>
                <div>28L Bags</div>
              </div>
              <div style="text-align:center;">
                <div id="cubicYards" style="font-size:1.2em;font-weight:bold;">0 yards</div>
                <div>Bulk Quantity</div>
              </div>
              <div style="text-align:center;">
                <div id="estimatedSoilCost" style="font-size:1.2em;font-weight:bold;">$0</div>
                <div>Est. Cost</div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="soilDescription">Description</label>
            <textarea id="soilDescription" placeholder="Describe soil improvements (e.g., 'Add 2 inches of quality compost to 500 sq ft of vegetable garden beds')"></textarea>
          </div>
        </div>

        <div class="upgrade-details" id="rainwaterHarvestingDetails">
          <h3>Rainwater Harvesting System</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="harvestingType">System Type</label>
              <select id="harvestingType" onchange="updateHarvestingCost()">
                <option value="barrel">Rain Barrel (200-400L)</option>
                <option value="tank1000">Storage Tank (1000L)</option>
                <option value="tank2500">Storage Tank (2500L)</option>
                <option value="tank5000">Large System (5000L+)</option>
              </select>
            </div>
            <div class="form-group">
              <label for="harvestingCost">Installation Cost Estimate ($)</label>
              <input type="number" id="harvestingCost" value="500">
            </div>
          </div>
          <div class="form-group">
            <label for="harvestingSavings">Expected Water Savings (L/year)</label>
            <input type="number" id="harvestingSavings" value="10000">
            <p class="help-text">Based on roof area and annual rainfall</p>
          </div>
          <div class="cost-estimate-box">
            <h4>üíß Rainwater Harvesting Benefits</h4>
            <ul style="text-align:left;margin:10px 0;">
              <li>Free water for outdoor irrigation</li>
              <li>Reduce stormwater runoff</li>
              <li>Emergency water supply</li>
              <li>50% rebate up to $750</li>
            </ul>
          </div>
        </div>
        
        <div style="display:flex;justify-content:space-between;margin-top:30px;">
          <button class="btn btn-secondary" onclick="previousStep(3)">‚Üê Back</button>
          <button class="btn btn-success" onclick="calculateSavings()">Calculate My Savings ‚Üí</button>
        </div>
      </div>
    </div>

    <!-- Results Section -->
    <div class="results-section" id="resultsSection">
      <h2>üéâ Your Water Savings & Rebate Summary</h2>
      
      <div class="primary-results">
        <div class="result-card highlight">
          <div class="card-icon">üí∞</div>
          <div class="result-value" id="totalRebates">$0</div>
          <div class="result-label">Total Rebates Available</div>
        </div>
        <div class="result-card">
          <div class="card-icon">üíß</div>
          <div class="result-value" id="waterSavings">0 L</div>
          <div class="result-label">Litres Saved per Year</div>
        </div>
        <div class="result-card">
          <div class="card-icon">üìâ</div>
          <div class="result-value" id="percentReduction">0%</div>
          <div class="result-label">Water Usage Reduction</div>
        </div>
        <div class="result-card">
          <div class="card-icon">üåç</div>
          <div class="result-value" id="environmentalImpact">0</div>
          <div class="result-label">10-Year Environmental Impact</div>
        </div>
      </div>

      <div class="detailed-breakdown">
        <h3>üí° Your Selected Upgrades</h3>
        <table class="savings-table">
          <thead>
            <tr>
              <th>Upgrade</th>
              <th>Rebate</th>
              <th>Water Saved/Year</th>
              <th>% Reduction</th>
            </tr>
          </thead>
          <tbody id="savingsTableBody"></tbody>
        </table>
      </div>

      <div class="financial-summary" id="financialSummary">
        <p class="summary-text">
          <strong>Annual Bill Savings:</strong> <span id="annualSavings">$0</span><br>
          <small>Want to see full ROI details? <a href="#" onclick="toggleROI()">Click here</a></small>
        </p>
        <div id="roiDetails" style="display:none;">
          <table class="roi-table">
            <thead>
              <tr>
                <th>Upgrade</th>
                <th>Cost</th>
                <th>Net Cost</th>
                <th>Payback</th>
                <th>10-Yr Benefit</th>
              </tr>
            </thead>
            <tbody id="roiTableBody"></tbody>
          </table>
        </div>
      </div>

      <div class="lead-capture-section">
        <h3>üèÜ Get Your Custom Quote & Rebate Assistance</h3>
        <p>Want a certified irrigation specialist to help you maximize your rebates and water savings? Enter your details below for a free custom quote.</p>
        <div class="lead-form">
          <div class="form-row">
            <div class="form-group">
              <input type="text" id="leadName" placeholder="Your Name" value="">
            </div>
            <div class="form-group">
              <input type="email" id="leadEmail" placeholder="Email Address" value="">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <input type="tel" id="leadPhone" placeholder="Phone Number" value="">
            </div>
            <div class="form-group">
              <select id="leadTiming">
                <option value="">When to start?</option>
                <option value="asap">As soon as possible</option>
                <option value="1month">Within 1 month</option>
                <option value="3months">Within 3 months</option>
                <option value="planning">Just planning</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <textarea id="leadNotes" placeholder="Any specific questions or concerns about your water conservation project?"></textarea>
          </div>
          <button class="btn btn-primary btn-large" onclick="submitLead()">Get My Free Quote ‚Üí</button>
        </div>
      </div>

      <div class="next-steps">
        <h3>üìã Next Steps</h3>
        <div class="steps-grid">
          <div class="step-card">
            <div class="step-number">1</div>
            <h4>Download Your Report</h4>
            <p>Get your personalized Water Savings & Rebate Report as a PDF</p>
          </div>
          <div class="step-card">
            <div class="step-number">2</div>
            <h4>Get Professional Quote</h4>
            <p>Certified specialist will contact you within 48 hours</p>
          </div>
          <div class="step-card">
            <div class="step-number">3</div>
            <h4>Apply for Rebates</h4>
            <p>We'll help you complete and submit your rebate applications</p>
          </div>
          <div class="step-card">
            <div class="step-number">4</div>
            <h4>Save Water & Money</h4>
            <p>Start saving thousands of litres and dollars every year</p>
          </div>
        </div>
      </div>

      <div class="cta-section">
        <h2>Ready to Start Saving?</h2>
        <p>Download your personalized report or start a new calculation.</p>
        <div style="display:flex;gap:20px;justify-content:center;margin-top:20px;flex-wrap:wrap;">
          <button class="btn btn-primary" id="downloadReport">üìÑ Download Report (PDF)</button>
          <a href="https://rdn.bc.ca/irrigation-upgrades-and-soil-improvements" target="_blank" class="btn btn-secondary">üìã View RDN Programs</a>
          <button class="btn btn-secondary" onclick="location.reload()">üîÑ New Calculation</button>
        </div>
      </div>
    </div>
  </div>

  <script src="rainwise-calculator.js"></script>
</body>
</html>