<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rainwise ROI Calculator - AI Forester</title>
  <meta name="description" content="Calculate your water savings and ROI for converting spray irrigation to drip systems. Includes rebate calculations for Nanaimo & RDN homeowners.">
  
  <!-- Microsoft Clarity Tracking -->
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "r6fqdz0i2c");
  </script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  
  <!-- Main CSS -->
  <link rel="stylesheet" href="/assets/css/main.css">
  
  <style>
    /* Calculator specific styles */
    .calculator-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
    }
    
    .email-gate-section {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      padding: 3rem;
      text-align: center;
      margin-bottom: 3rem;
    }
    
    .email-gate-section h2 {
      font-size: 2rem;
      color: var(--primary-dark);
      margin-bottom: 1rem;
    }
    
    .email-gate-section p {
      font-size: 1.1rem;
      color: var(--gray);
      margin-bottom: 2rem;
    }
    
    .benefits-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
      text-align: left;
    }
    
    .benefit-card {
      background: #f8f9fa;
      padding: 1.5rem;
      border-radius: 8px;
      border-left: 4px solid var(--accent);
    }
    
    .benefit-card i {
      color: var(--accent);
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }
    
    .benefit-card h3 {
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
      color: var(--primary-dark);
    }
    
    .benefit-card p {
      font-size: 0.9rem;
      margin: 0;
    }
    
    .email-form {
      display: flex;
      gap: 1rem;
      max-width: 500px;
      margin: 2rem auto;
    }
    
    .email-form input {
      flex: 1;
      padding: 1rem;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 1rem;
    }
    
    .email-form button {
      padding: 1rem 2rem;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .email-form button:hover {
      background: #e67e22;
      transform: translateY(-2px);
    }
    
    /* Calculator Form Styles */
    .calculator-section {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      padding: 3rem;
      display: none;
    }
    
    .calculator-section.active {
      display: block;
    }
    
    .form-group {
      margin-bottom: 2rem;
    }
    
    .form-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--primary-dark);
    }
    
    .form-group input,
    .form-group select {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid #e0e0e0;
      border-radius: 6px;
      font-size: 1rem;
    }
    
    .form-group input:focus,
    .form-group select:focus {
      border-color: var(--accent);
      outline: none;
    }
    
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }
    
    .calculate-btn {
      background: var(--primary);
      color: white;
      padding: 1rem 2rem;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: all 0.3s ease;
    }
    
    .calculate-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
    }
    
    /* Results Section */
    .results-section {
      background: #f8f9fa;
      border-radius: 12px;
      padding: 2rem;
      margin-top: 2rem;
      display: none;
    }
    
    .results-section.active {
      display: block;
    }
    
    .results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-top: 1.5rem;
    }
    
    .result-card {
      background: white;
      padding: 1.5rem;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    .result-card h3 {
      font-size: 1rem;
      color: var(--gray);
      margin-bottom: 0.5rem;
    }
    
    .result-card .value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary-dark);
    }
    
    .result-card.highlight {
      background: var(--accent);
      color: white;
    }
    
    .result-card.highlight h3 {
      color: white;
      opacity: 0.9;
    }
    
    .result-card.highlight .value {
      color: white;
    }
    
    @media (max-width: 768px) {
      .form-row {
        grid-template-columns: 1fr;
      }
      
      .email-form {
        flex-direction: column;
      }
      
      .calculator-section {
        padding: 2rem 1.5rem;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container header-container">
      <a href="/" class="logo">AI<span>Forester</span></a>
      <nav class="nav">
        <button class="mobile-menu-btn" aria-label="Toggle menu">
          <i class="fas fa-bars"></i>
        </button>
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/projects/">Projects</a></li>
          <li><a href="/products/">Products</a></li>
          <li><a href="/services.html">Services</a></li>
          <li><a href="/learning/">Learning</a></li>
          <li><a href="/resources/">Resources</a></li>
          <li><a href="/#contact">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Page Header -->
  <section class="project-header">
    <div class="container">
      <h1>Rainwise ROI Calculator</h1>
      <p class="subtitle">Calculate your water savings and ROI for irrigation system upgrades</p>
    </div>
  </section>

  <!-- Main Content -->
  <section class="calculator-content">
    <div class="calculator-container">
      <!-- Email Gate -->
      <div id="emailGate" class="email-gate-section">
        <h2>ðŸŒŠ Transform Your Water Usage & Save Money</h2>
        <p>Discover how much you can save by converting from spray to drip irrigation with our free ROI calculator.</p>
        
        <div class="benefits-grid">
          <div class="benefit-card">
            <i class="fas fa-tint"></i>
            <h3>Save Water</h3>
            <p>Reduce usage by up to 50%</p>
          </div>
          <div class="benefit-card">
            <i class="fas fa-dollar-sign"></i>
            <h3>Get Rebates</h3>
            <p>Up to $250 from RDN</p>
          </div>
          <div class="benefit-card">
            <i class="fas fa-chart-line"></i>
            <h3>Quick Payback</h3>
            <p>See your ROI timeline</p>
          </div>
        </div>
        
        <form id="rainwiseEmailForm" class="email-form">
          <input type="email" id="rainwiseEmail" placeholder="Enter your email address" required>
          <button type="submit">Get Free Access</button>
        </form>
        
        <p style="font-size: 0.85rem; color: #666; margin-top: 1rem;">
          Join homeowners in Nanaimo & RDN saving water and money. Unsubscribe anytime.
        </p>
      </div>
      
      <!-- Calculator Section (Hidden initially) -->
      <div id="calculatorSection" class="calculator-section">
        <h2>Irrigation System ROI Calculator</h2>
        <p>Enter your details below to calculate potential savings and payback period.</p>
        
        <form id="roiCalculator">
          <div class="form-row">
            <div class="form-group">
              <label for="currentSystem">Current System Type</label>
              <select id="currentSystem" required>
                <option value="">Select system type</option>
                <option value="spray">Spray/Sprinkler</option>
                <option value="rotor">Rotor</option>
                <option value="manual">Manual Watering</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="irrigationArea">Irrigation Area (sq ft)</label>
              <input type="number" id="irrigationArea" placeholder="e.g., 1000" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="waterCost">Water Cost ($/1000 gallons)</label>
              <input type="number" id="waterCost" step="0.01" placeholder="e.g., 3.50" value="3.50" required>
            </div>
            
            <div class="form-group">
              <label for="monthsIrrigating">Months Irrigating/Year</label>
              <input type="number" id="monthsIrrigating" min="1" max="12" placeholder="e.g., 6" value="6" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="conversionCost">Estimated Conversion Cost ($)</label>
              <input type="number" id="conversionCost" placeholder="e.g., 500" required>
            </div>
            
            <div class="form-group">
              <label for="rebateEligible">Eligible for RDN Rebate?</label>
              <select id="rebateEligible" required>
                <option value="yes">Yes - RDN Resident</option>
                <option value="no">No / Not Sure</option>
              </select>
            </div>
          </div>
          
          <button type="submit" class="calculate-btn">
            <i class="fas fa-calculator"></i> Calculate My Savings
          </button>
        </form>
        
        <!-- Results Section -->
        <div id="resultsSection" class="results-section">
          <h3>Your Estimated Savings</h3>
          
          <div class="results-grid">
            <div class="result-card">
              <h3>Annual Water Savings</h3>
              <div class="value" id="waterSavings">--</div>
            </div>
            
            <div class="result-card">
              <h3>Annual Cost Savings</h3>
              <div class="value" id="costSavings">--</div>
            </div>
            
            <div class="result-card">
              <h3>Available Rebate</h3>
              <div class="value" id="rebateAmount">--</div>
            </div>
            
            <div class="result-card highlight">
              <h3>Payback Period</h3>
              <div class="value" id="paybackPeriod">--</div>
            </div>
          </div>
          
          <div style="margin-top: 2rem; padding: 1.5rem; background: #e8f4f8; border-radius: 8px;">
            <h4 style="margin-bottom: 0.5rem;">Next Steps:</h4>
            <ol style="margin: 0; padding-left: 1.5rem;">
              <li>Apply for RDN rebate (if eligible)</li>
              <li>Get quotes from local irrigation contractors</li>
              <li>Start saving water and money!</li>
            </ol>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-container">
        <div class="footer-col">
          <h4>AI Forester</h4>
          <p>Bridging forestry expertise and artificial intelligence to create innovative solutions for environmental challenges.</p>
        </div>
        <div class="footer-col">
          <h4>Explore</h4>
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/projects/">Projects</a></li>
            <li><a href="/products/">Products</a></li>
            <li><a href="/services.html">Services</a></li>
            <li><a href="/learning/">Learning</a></li>
            <li><a href="/resources/">Resources</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Contact</h4>
          <ul>
            <li><a href="mailto:david@aiforester.com">david@aiforester.com</a></li>
            <li><a href="https://linkedin.com/in/david-beleznay-rpf-p-eng-75b4b511">LinkedIn</a></li>
          </ul>
        </div>
      </div>
      <div class="copyright">
        <p>&copy; 2025 AI Forester. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- EmailJS SDK -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  
  <!-- JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize EmailJS
      emailjs.init("xicpYOZqOxz__Oh1J");
      
      // Mobile menu
      const menuBtn = document.querySelector('.mobile-menu-btn');
      const body = document.body;
      
      menuBtn.addEventListener('click', function() {
        body.classList.toggle('mobile-menu-open');
      });
      
      // Check if user already has access
      const hasRainwiseAccess = localStorage.getItem('aiforester_rainwise_access');
      if (hasRainwiseAccess) {
        document.getElementById('emailGate').style.display = 'none';
        document.getElementById('calculatorSection').classList.add('active');
      }
      
      // Email form submission
      const emailForm = document.getElementById('rainwiseEmailForm');
      emailForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const email = document.getElementById('rainwiseEmail').value;
        const button = this.querySelector('button');
        const originalText = button.textContent;
        
        button.textContent = 'Processing...';
        button.disabled = true;
        
        try {
          // Send email notification
          await emailjs.send(
            "service_snup99l",
            "template_61o5oev",
            {
              from_email: email,
              date: new Date().toLocaleDateString(),
              time: new Date().toLocaleTimeString(),
              product: 'Rainwise Calculator'
            }
          );
          
          // Store access
          localStorage.setItem('aiforester_rainwise_access', 'true');
          localStorage.setItem('aiforester_rainwise_email', email);
          
          // Show calculator
          document.getElementById('emailGate').style.display = 'none';
          document.getElementById('calculatorSection').classList.add('active');
          
          // Smooth scroll
          document.getElementById('calculatorSection').scrollIntoView({ 
            behavior: 'smooth', 
            block: 'start' 
          });
          
        } catch (error) {
          console.error('Error:', error);
          alert('There was an error. Please try again or contact david@aiforester.com');
          button.textContent = originalText;
          button.disabled = false;
        }
      });
      
      // ROI Calculator
      const calculatorForm = document.getElementById('roiCalculator');
      calculatorForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Get form values
        const currentSystem = document.getElementById('currentSystem').value;
        const area = parseFloat(document.getElementById('irrigationArea').value);
        const waterCost = parseFloat(document.getElementById('waterCost').value);
        const months = parseInt(document.getElementById('monthsIrrigating').value);
        const conversionCost = parseFloat(document.getElementById('conversionCost').value);
        const rebateEligible = document.getElementById('rebateEligible').value;
        
        // Water usage calculations (gallons per sq ft per season)
        const waterUsage = {
          spray: 25,
          rotor: 20,
          manual: 30,
          drip: 12.5
        };
        
        // Calculate savings
        const currentUsage = waterUsage[currentSystem] * area;
        const dripUsage = waterUsage.drip * area;
        const waterSaved = currentUsage - dripUsage;
        const waterSavedPercentage = (waterSaved / currentUsage) * 100;
        
        // Cost calculations
        const annualWaterCost = (currentUsage * months / 12) * (waterCost / 1000);
        const annualDripCost = (dripUsage * months / 12) * (waterCost / 1000);
        const annualSavings = annualWaterCost - annualDripCost;
        
        // Rebate calculation
        const rebateAmount = rebateEligible === 'yes' ? Math.min(250, conversionCost * 0.5) : 0;
        const netCost = conversionCost - rebateAmount;
        
        // Payback period
        const paybackYears = netCost / annualSavings;
        
        // Display results
        document.getElementById('waterSavings').textContent = 
          Math.round(waterSaved).toLocaleString() + ' gal/year';
        document.getElementById('costSavings').textContent = 
          '$' + Math.round(annualSavings).toLocaleString();
        document.getElementById('rebateAmount').textContent = 
          '$' + Math.round(rebateAmount).toLocaleString();
        document.getElementById('paybackPeriod').textContent = 
          paybackYears < 10 ? paybackYears.toFixed(1) + ' years' : '10+ years';
        
        // Show results
        document.getElementById('resultsSection').classList.add('active');
        document.getElementById('resultsSection').scrollIntoView({ 
          behavior: 'smooth', 
          block: 'nearest' 
        });
      });
    });
  </script>
</body>
</html>