<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RainWise Calculator - RDN Water Conservation ROI | AI Forester</title>
  <meta name="description" content="Calculate water savings, ROI, and payback periods for RDN rebate programs. Get detailed consumption analysis, installation costs, and prepare your complete application.">
  <link rel="stylesheet" href="rainwise-calculator.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <header>
    <div class="container">
      <h1>RDN Water Conservation ROI Calculator</h1>
      <p class="subtitle">Complete Financial Analysis & Rebate Application Helper</p>
      <div class="badges">
        <span class="badge">üí∞ Up to $875 in Rebates</span>
        <span class="badge">üìä ROI & Payback Analysis</span>
        <span class="badge">üíß Water Savings Calculator</span>
        <span class="badge">üîß Installation Cost Estimates</span>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="roi-showcase">
      <h2>üéØ Complete Return on Investment Analysis</h2>
      <div class="roi-intro">
        <h3>Enhanced with Professional Cost Estimates</h3>
        <p>‚úÖ Analyzes your water consumption baseline using RDN seasonal patterns</p>
        <p>‚úÖ Provides rough installation cost estimates for budgeting</p>
        <p>‚úÖ Calculates potential water savings for each upgrade scenario</p>
        <p>‚úÖ Applies your local water rates to determine actual cost savings</p>
        <p>‚úÖ Computes payback periods based on net project costs after rebates</p>
        <p>‚úÖ Provides 10-year financial projections and environmental impact</p>
      </div>
      
      <div class="water-rates-info">
        <h4>üí∞ Example Water Rates (Nanaimo 2025) - Rates May Vary Within RDN</h4>
        <div class="rate-note">
          <strong>Note:</strong> This calculator uses Nanaimo's 2025 water rates as an example. Water rates vary by municipality within the RDN. Check with your local water utility for exact rates to get the most accurate ROI calculations.
        </div>
        <div class="rate-tier"><span class="tier-name">Base Rate (Daily):</span><span class="tier-rate">$1.06/day</span></div>
        <div class="rate-tier"><span class="tier-name">Tier 1 (0-110 gal/day):</span><span class="tier-rate">$0.00223/gallon</span></div>
        <div class="rate-tier"><span class="tier-name">Tier 2 (110-220 gal/day):</span><span class="tier-rate">$0.00555/gallon</span></div>
        <div class="rate-tier"><span class="tier-name">Tier 3 (220-330 gal/day):</span><span class="tier-rate">$0.00971/gallon</span></div>
        <div class="rate-tier"><span class="tier-name">Tier 4 (330+ gal/day):</span><span class="tier-rate">$0.01703/gallon</span></div>
      </div>
    </div>

    <div class="calculator-wrapper">
      <div class="progress-bar">
        <div class="progress-step active" id="step1"><div class="step-circle">1</div><div class="step-label">Property & Contact</div></div>
        <div class="progress-step" id="step2"><div class="step-circle">2</div><div class="step-label">Water Usage Baseline</div></div>
        <div class="progress-step" id="step3"><div class="step-circle">3</div><div class="step-label">Select Upgrades</div></div>
        <div class="progress-step" id="step4"><div class="step-circle">4</div><div class="step-label">ROI Analysis</div></div>
      </div>

      <!-- Step 1: Property Information -->
      <div class="form-section active" id="section1">
        <h2>Property Owner Information</h2>
        <div class="form-row">
          <div class="form-group"><label for="fullName">Full Name</label><input type="text" id="fullName" placeholder="John Smith"></div>
          <div class="form-group"><label for="email">Email</label><input type="email" id="email" placeholder="john@email.com"></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label for="phoneMain">Phone (Main)</label><input type="tel" id="phoneMain" placeholder="250-555-0123"></div>
          <div class="form-group"><label for="phoneAlt">Phone (Alt)</label><input type="tel" id="phoneAlt" placeholder="250-555-0456"></div>
        </div>
        <div class="form-group"><label for="propertyAddress">Property Address</label><input type="text" id="propertyAddress" placeholder="123 Main Street"></div>
        <div class="form-row">
          <div class="form-group">
            <label for="city">City/Area within RDN</label>
            <input type="text" id="city" placeholder="e.g., Nanaimo, Parksville, Qualicum Beach" list="rdnCities">
            <datalist id="rdnCities">
              <option value="Nanaimo">
              <option value="Parksville">
              <option value="Qualicum Beach">
              <option value="Lantzville">
              <option value="Gabriola Island">
              <option value="Cedar">
              <option value="Ladysmith">
              <option value="Coombs">
              <option value="Errington">
              <option value="French Creek">
            </datalist>
          </div>
          <div class="form-group"><label for="postalCode">Postal Code</label><input type="text" id="postalCode" placeholder="V9S 1A1"></div>
        </div>
        <div class="form-group">
          <label for="propertyType">Property Type</label>
          <select id="propertyType" onchange="updatePropertyDefaults()">
            <option value="single">Single Family Home</option>
            <option value="townhouse">Townhouse</option>
            <option value="condo">Condo with Garden</option>
            <option value="large">Large Estate (1+ acre)</option>
          </select>
        </div>
        <button class="btn btn-primary" onclick="nextStep(1)" style="float:right;">Next: Water Usage ‚Üí</button>
      </div>

      <!-- Step 2: Water Usage Baseline -->
      <div class="form-section" id="section2">
        <h2>Water Usage Baseline</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="irrigatedArea">Irrigated Area (sq ft)</label>
            <input type="number" id="irrigatedArea" placeholder="2000" onchange="updateUsageAnalysis()">
            <p class="help-text">Total lawn and garden area that receives irrigation</p>
          </div>
          <div class="form-group">
            <label for="irrigationMonths">Irrigation Months/Year</label>
            <input type="number" id="irrigationMonths" placeholder="6" value="6" onchange="updateUsageAnalysis()">
            <p class="help-text">Typically May-October in the RDN region</p>
          </div>
        </div>
        <div class="form-group">
          <label for="irrigationSystem">Current Irrigation System</label>
          <select id="irrigationSystem" onchange="updateUsageAnalysis()">
            <option value="manual">Manual Watering (hose/sprinkler)</option>
            <option value="timer">Basic Timer System</option>
            <option value="inground">In-ground Sprinklers</option>
            <option value="mixed">Mixed System</option>
          </select>
        </div>
        <h3>Water Bills (Optional - Improves Accuracy)</h3>
        <p class="help-text">Enter your gallons from recent water bills for more accurate consumption analysis</p>
        <div class="water-usage-grid">
          <div><label for="usage1">Winter 2024-25</label><input type="number" id="usage1" placeholder="8,000" onchange="updateUsageAnalysis()"></div>
          <div><label for="usage2">Fall 2024</label><input type="number" id="usage2" placeholder="12,000" onchange="updateUsageAnalysis()"></div>
          <div><label for="usage3">Summer 2024</label><input type="number" id="usage3" placeholder="20,000" onchange="updateUsageAnalysis()"></div>
          <div><label for="usage4">Spring 2024</label><input type="number" id="usage4" placeholder="15,000" onchange="updateUsageAnalysis()"></div>
        </div>
        <div class="usage-analysis" id="usageAnalysis" style="display:none;">
          <h4>üìä Water Consumption Analysis</h4>
          <div class="analysis-grid">
            <div class="analysis-metric"><div class="metric-value" id="avgDailyUsage">0</div><div>Daily Usage</div></div>
            <div class="analysis-metric"><div class="metric-value" id="outdoorUsage">0%</div><div>Outdoor Use</div></div>
            <div class="analysis-metric"><div class="metric-value" id="currentTier">Tier 1</div><div>Rate Tier (Example)</div></div>
            <div class="analysis-metric"><div class="metric-value" id="annualCost">$0</div><div>Est. Annual Cost</div></div>
          </div>
          <div style="margin-top:15px;padding:15px;background:#f0f8ff;border-radius:8px;">
            <strong>Savings Potential:</strong> <span id="savingsPotential">Calculating...</span>
          </div>
        </div>
        <div style="display:flex;justify-content:space-between;margin-top:30px;">
          <button class="btn btn-secondary" onclick="previousStep(2)">‚Üê Back</button>
          <button class="btn btn-primary" onclick="nextStep(2)">Next: Upgrades ‚Üí</button>
        </div>
      </div>

      <!-- Step 3: Select Upgrades (Simplified) -->
      <div class="form-section" id="section3">
        <h2>Select Upgrades & Review Costs</h2>
        <div class="checkbox-group">
          <div class="checkbox-item">
            <input type="checkbox" id="rainSensor" value="rainSensor" onchange="toggleUpgradeDetails(this.value)">
            <div class="checkbox-content">
              <div class="checkbox-title">Rain Sensor <span class="rebate-amount-inline">($75 rebate)</span></div>
              <div class="checkbox-description">10-15% water savings ‚Ä¢ Prevents watering in rain</div>
            </div>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="smartController" value="smartController" onchange="toggleUpgradeDetails(this.value)">
            <div class="checkbox-content">
              <div class="checkbox-title">Smart Controller <span class="rebate-amount-inline">($100 rebate)</span></div>
              <div class="checkbox-description">20-40% water savings ‚Ä¢ Weather-based scheduling</div>
            </div>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="dripConversion" value="dripConversion" onchange="toggleUpgradeDetails(this.value)">
            <div class="checkbox-content">
              <div class="checkbox-title">Drip Irrigation <span class="rebate-amount-inline">($400 rebate)</span></div>
              <div class="checkbox-description">30-50% water savings ‚Ä¢ Targeted root watering</div>
            </div>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="mpRotators" value="mpRotators" onchange="toggleUpgradeDetails(this.value)">
            <div class="checkbox-content">
              <div class="checkbox-title">MP Rotators <span class="rebate-amount-inline">($100 rebate)</span></div>
              <div class="checkbox-description">20-30% water savings ‚Ä¢ Even water distribution</div>
            </div>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="soilImprovements" value="soilImprovements" onchange="toggleUpgradeDetails(this.value)">
            <div class="checkbox-content">
              <div class="checkbox-title">Soil Improvements <span class="rebate-amount-inline">(50% up to $100)</span></div>
              <div class="checkbox-description">25% less watering needed ‚Ä¢ Better water retention</div>
            </div>
          </div>
        </div>
        
        <!-- Upgrade Details (shown when selected) -->
        <div class="upgrade-details" id="rainSensorDetails">
          <h3>Rain Sensor Details</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="rainSensorCost">Total Cost Estimate ($)</label>
              <input type="number" id="rainSensorCost" value="150">
              <p class="help-text">Includes sensor and professional installation</p>
            </div>
            <div class="form-group">
              <label for="rainSensorSavings">Expected Water Savings (%)</label>
              <input type="number" id="rainSensorSavings" value="15" min="10" max="20">
            </div>
          </div>
        </div>
        
        <div class="upgrade-details" id="smartControllerDetails">
          <h3>Smart Controller Details</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="controllerZones">Number of Zones</label>
              <select id="controllerZones" onchange="updateControllerCost()">
                <option value="4">4 zones</option>
                <option value="8" selected>8 zones</option>
                <option value="12">12 zones</option>
                <option value="16">16 zones</option>
              </select>
            </div>
            <div class="form-group">
              <label for="controllerCost">Total Cost Estimate ($)</label>
              <input type="number" id="controllerCost" value="450">
            </div>
          </div>
          <div class="form-group">
            <label for="controllerSavings">Expected Water Savings (%)</label>
            <input type="number" id="controllerSavings" value="30" min="20" max="40">
          </div>
        </div>
        
        <div class="upgrade-details" id="dripConversionDetails">
          <h3>Drip Irrigation Conversion</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="dripArea">Area to Convert (sq ft)</label>
              <input type="number" id="dripArea" placeholder="1000" onchange="updateDripCost()">
              <p class="help-text">Garden beds and shrub areas</p>
            </div>
            <div class="form-group">
              <label for="dripCost">Total Cost Estimate ($)</label>
              <input type="number" id="dripCost" value="1200">
            </div>
          </div>
          <div class="form-group">
            <label for="dripSavings">Expected Water Savings (%)</label>
            <input type="number" id="dripSavings" value="40" min="30" max="50">
          </div>
          <div class="cost-estimate-box">
            <h4>üí∞ Cost Estimate: $1.00-1.50 per sq ft</h4>
            <div class="cost-grid">
              <div class="cost-item"><div class="cost-value">$0.40-0.60</div><div class="cost-label">Materials/sq ft</div></div>
              <div class="cost-item"><div class="cost-value">$0.60-0.90</div><div class="cost-label">Labor/sq ft</div></div>
              <div class="cost-item"><div class="cost-value" id="dripTotalEstimate">$1,200</div><div class="cost-label">Your Estimate</div></div>
            </div>
          </div>
          <div class="form-group">
            <label for="irrigationDescription">Project Description</label>
            <textarea id="irrigationDescription" placeholder="Describe conversion plans (e.g., 'Convert 1000 sq ft of garden beds from spray heads to drip irrigation with pressure compensating emitters')"></textarea>
          </div>
        </div>
        
        <div class="upgrade-details" id="mpRotatorsDetails">
          <h3>MP Rotator Nozzles</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="rotatorHeads">Number of Heads</label>
              <input type="number" id="rotatorHeads" value="20" onchange="updateRotatorCost()">
            </div>
            <div class="form-group">
              <label for="rotatorCost">Total Cost Estimate ($)</label>
              <input type="number" id="rotatorCost" value="400">
            </div>
          </div>
          <div class="form-group">
            <label for="rotatorSavings">Expected Water Savings (%)</label>
            <input type="number" id="rotatorSavings" value="25" min="20" max="30">
          </div>
        </div>
        
        <div class="upgrade-details" id="soilImprovementsDetails">
          <h3>Soil Improvements</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="applicationArea">Application Area (sq ft)</label>
              <input type="number" id="applicationArea" placeholder="500" onchange="calculateSoilAmounts()">
            </div>
            <div class="form-group">
              <label for="applicationDepth">Application Type</label>
              <select id="applicationDepth" onchange="calculateSoilAmounts()">
                <option value="">Select type</option>
                <option value="garden">Garden Beds (2 inch)</option>
                <option value="lawn">Lawn Topdressing (1/4 inch)</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label for="soilCost">Total Cost Estimate ($)</label>
            <input type="number" id="soilCost" value="200">
            <p class="help-text">Remember: 50% rebate up to $100</p>
          </div>
          <div class="cost-estimate-box" id="soilCalculator" style="display:none;">
            <h4>Required Soil Amendment</h4>
            <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:15px;">
              <div style="text-align:center;">
                <div id="bagsNeeded" style="font-size:1.2em;font-weight:bold;">0 bags</div>
                <div>28L Bags</div>
              </div>
              <div style="text-align:center;">
                <div id="cubicYards" style="font-size:1.2em;font-weight:bold;">0 yards</div>
                <div>Bulk Quantity</div>
              </div>
              <div style="text-align:center;">
                <div id="estimatedSoilCost" style="font-size:1.2em;font-weight:bold;">$0</div>
                <div>Est. Cost</div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="soilDescription">Description</label>
            <textarea id="soilDescription" placeholder="Describe soil improvements (e.g., 'Add 2 inches of quality compost to 500 sq ft of vegetable garden beds')"></textarea>
          </div>
        </div>
        
        <div style="display:flex;justify-content:space-between;margin-top:30px;">
          <button class="btn btn-secondary" onclick="previousStep(3)">‚Üê Back</button>
          <button class="btn btn-success" onclick="calculateROI()">Calculate ROI ‚Üí</button>
        </div>
      </div>
    </div>

    <!-- Results Section -->
    <div class="results-section" id="resultsSection">
      <h2>üìä ROI Analysis Results</h2>
      <div class="roi-results">
        <div class="roi-card"><div>üíß</div><div class="roi-value" id="waterSavings">0</div><div>Gallons Saved/Year</div></div>
        <div class="roi-card"><div>üí∞</div><div class="roi-value" id="costSavings">$0</div><div>Annual Savings</div></div>
        <div class="roi-card"><div>üéØ</div><div class="roi-value" id="totalRebates">$0</div><div>Total Rebates</div></div>
        <div class="roi-card"><div>üìÖ</div><div class="roi-value" id="paybackPeriod">0</div><div>Payback Period</div></div>
        <div class="roi-card"><div>üìà</div><div class="roi-value" id="roiPercentage">0%</div><div>5-Year ROI</div></div>
        <div class="roi-card"><div>üè†</div><div class="roi-value" id="propertyValue">+$0</div><div>Property Value</div></div>
      </div>
      
      <div style="background:#fff3cd;padding:25px;border-radius:12px;margin-bottom:30px;">
        <h3>üí° Financial Breakdown</h3>
        <table class="payback-table">
          <thead><tr><th>Upgrade</th><th>Cost</th><th>Rebate</th><th>Net Cost</th><th>Annual Savings</th><th>Payback</th><th>10-Yr Net</th></tr></thead>
          <tbody id="paybackTableBody"></tbody>
        </table>
      </div>
      
      <div class="environmental-impact">
        <h3>üåç Environmental Impact (10-Year)</h3>
        <div class="impact-grid">
          <div class="impact-item"><div class="impact-value" id="lifetimeWaterSavings">0</div><div>Gallons Saved</div></div>
          <div class="impact-item"><div class="impact-value" id="waterReduction">0%</div><div>Water Reduction</div></div>
          <div class="impact-item"><div class="impact-value" id="co2Savings">0</div><div>lbs CO‚ÇÇ Saved</div></div>
          <div class="impact-item"><div class="impact-value" id="lifetimeSavings">$0</div><div>10-Year Savings</div></div>
        </div>
      </div>
      
      <div class="application-preview">
        <h3>üìã Pre-filled Application with ROI Summary</h3>
        <p style="background:#e3f2fd;padding:12px;border-radius:6px;margin-bottom:15px;">
          <strong>Note:</strong> Water savings calculations use example rates. Your actual savings may vary based on your local water utility rates.
        </p>
        <div class="form-preview" id="applicationPreview"></div>
        <div style="background:#d1ecf1;padding:20px;border-radius:8px;">
          <h4>üìã Implementation Checklist</h4>
          <div id="submissionChecklist"></div>
        </div>
      </div>
      
      <div class="cta-section">
        <h2>Your Water Conservation Investment Plan is Ready!</h2>
        <p>Complete ROI analysis shows strong returns through water savings and rebates.</p>
        <div style="display:flex;gap:20px;justify-content:center;margin-top:20px;flex-wrap:wrap;">
          <button class="btn btn-primary" id="downloadApplication">üìÑ Download Analysis (PDF)</button>
          <a href="https://www.rdn.bc.ca/sites/default/files/inline-files/2025%20I%26S%20Pre-approval%20Application%20Form.pdf" target="_blank" class="btn btn-secondary">üìã Official RDN Form</a>
          <button class="btn btn-secondary" onclick="location.reload()">üîÑ New Analysis</button>
        </div>
      </div>
    </div>
  </div>

  <script src="rainwise-calculator.js"></script>
</body>
</html>